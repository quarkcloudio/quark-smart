"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[717],{52756:function(je,L,e){e.r(L);var x=e(97857),A=e.n(x),z=e(15009),v=e.n(z),$=e(19632),G=e.n($),H=e(99289),C=e.n(H),N=e(5574),c=e.n(N),d=e(67294),r=e(80854),F=e(58720),J=e(3321),Q=e(33852),Le=e.n(Q),V=e(82925),X=e(64793),Y=e(94785),g=e(17331),q=e(45104),w=e(66949),f=e(43083),R=e(91373),ee=e(42952),ne=e(92443),_e=e(87547),a=e(85893),ae=function(te){var ue=(0,r.useModel)("pageLoading"),se=ue.pageLoading,oe=(0,d.useState)({}),K=c()(oe,2),u=K[0],re=K[1],le=(0,d.useState)({}),U=c()(le,2),I=U[0],y=U[1],ie=(0,r.useModel)("pageLoading"),O=ie.setPageLoading,de=(0,r.useModel)("@@initialState"),j=de.initialState,s=j==null?void 0:j.accountInfo,P=(0,r.useLocation)(),E=Y.Z.parse(P.search),me=(0,d.useState)(""),T=c()(me,2),Ee=T[0],b=T[1],ve=(0,d.useState)([]),B=c()(ve,2),h=B[0],S=B[1],ce=(0,d.useState)([""]),W=c()(ce,2),pe=W[0],k=W[1],Me=(0,d.useState)(!1),Z=c()(Me,2),fe=Z[0],Oe=Z[1],Pe=function(){var t=C()(v()().mark(function n(){var o,m,_,D,l,M;return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,r.request)("./config.json");case 2:if(o=i.sent,m=o.api.layout,m){i.next=7;break}return y("\u8BF7\u8BBE\u7F6E\u5E03\u5C40\u63A5\u53E3\uFF01"),i.abrupt("return");case 7:return O(!0),i.next=10,(0,R.U)({url:m});case 10:_=i.sent,re(_),_.menu&&(D=(0,f.hA)(_.menu,P.pathname,decodeURIComponent(p)),l=(0,f.Kg)(_.menu,D),h.push.apply(h,G()(l)),S(h),k([D])),M=(0,f.Ah)(_.menu,P.pathname,decodeURIComponent(p)),b(M),O(!1);case 16:case"end":return i.stop()}},n)}));return function(){return t.apply(this,arguments)}}(),he=function(){var t=C()(v()().mark(function n(){var o,m,_;return v()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(o=(0,f.Ah)(u.menu,P.pathname,decodeURIComponent(p)),b(o),p){l.next=5;break}return y(null),l.abrupt("return");case 5:return m={},Object.keys(E).forEach(function(M){M!=="api"&&(m[M]=E[M])}),O(!0),l.next=10,(0,R.U)({url:p,data:m});case 10:_=l.sent,y(_),O(!1);case 13:case"end":return l.stop()}},n)}));return function(){return t.apply(this,arguments)}}(),p="";E!=null&&E.api&&(p=E.api),(0,d.useEffect)(function(){Pe()},[]),(0,d.useEffect)(function(){he()},[E.api]);var De=function(n){k([n.key]);var o=(0,f.A9)(u.menu,n.key);if(o.indexOf("http")===0)return window.open(o,"_blank"),!1;r.history.push(o)},Ce=function(n){S(n)},ge=function(n){switch(n.key){case"logout":Re();break;case"setting":r.history.push({pathname:"/layout/index",search:"api=/api/admin/account/setting/form"});break}},Re=function(){var t=C()(v()().mark(function n(){var o;return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,R.U)({url:"/api/admin/logout/index/handle"});case 2:o=_.sent,o.status==="success"&&sessionStorage.removeItem("token"),r.history.push("/");case 5:case"end":return _.stop()}},n)}));return function(){return t.apply(this,arguments)}}(),ye=[{key:"setting",icon:(0,a.jsx)(ee.Z,{}),label:"\u4E2A\u4EBA\u8BBE\u7F6E"},{key:"logout",icon:(0,a.jsx)(ne.Z,{}),label:"\u9000\u51FA\u767B\u5F55"}];return(0,a.jsx)(F.ZP,{locale:V.Z,children:(0,a.jsxs)(J.Z,{children:[(0,a.jsxs)(r.Helmet,{children:[(0,a.jsx)("meta",{charSet:"utf-8"}),(0,a.jsx)("title",{children:Ee})]}),(u==null?void 0:u.title)&&(0,a.jsx)(X.f,A()(A()({},u),{},{loading:se,logo:u.logo?u.logo:w,iconfontUrl:u.iconfontUrl,openKeys:h,selectedKeys:pe,menuProps:{onOpenChange:Ce,onClick:De},onCollapse:function(n){Oe(n)},menuDataRender:function(){return u.menu},actionsRender:function(){return[(0,a.jsx)(g.Z,{body:u.actions},"action")]},rightContentRender:function(){return(0,a.jsx)(q.Z,{menu:{items:ye,onClick:ge},avatar:s!=null&&s.avatar?s==null?void 0:s.avatar:(0,a.jsx)(_e.Z,{}),name:te.layout==="side"?fe||s==null?void 0:s.nickname:s==null?void 0:s.nickname})},footerRender:function(){return(0,a.jsx)(g.Z,{body:u.footer})},children:I?(0,a.jsx)(g.Z,{body:I}):(0,a.jsx)(r.Outlet,{})}))]})})};L.default=ae}}]);
