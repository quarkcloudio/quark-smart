"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[717],{52756:function(ye,R,e){e.r(R);var x=e(97857),L=e.n(x),z=e(15009),E=e.n(z),$=e(19632),G=e.n($),H=e(99289),g=e.n(H),N=e(5574),p=e.n(N),d=e(67294),r=e(80854),F=e(17093),J=e(3321),Q=e(85418),V=e(33852),Re=e.n(V),X=e(82925),Y=e(98206),q=e(94785),C=e(46401),w=e(66949),P=e(43083),j=e(91373),ee=e(43425),ne=e(92443),_e=e(87547),a=e(85893),ae=function(te){var se=(0,r.useModel)("pageLoading"),oe=se.pageLoading,ue=(0,d.useState)({}),K=p()(ue,2),o=K[0],re=K[1],le=(0,d.useState)({}),A=p()(le,2),I=A[0],U=A[1],ie=(0,r.useModel)("pageLoading"),h=ie.setPageLoading,de=(0,r.useModel)("@@initialState"),y=de.initialState,u=y==null?void 0:y.accountInfo,D=(0,r.useLocation)(),c=q.Z.parse(D.search),me=(0,d.useState)(""),T=p()(me,2),ce=T[0],b=T[1],Ee=(0,d.useState)([]),k=p()(Ee,2),f=k[0],B=k[1],pe=(0,d.useState)([""]),S=p()(pe,2),ve=S[0],W=S[1],Me=(0,d.useState)(!1),Z=p()(Me,2),Pe=Z[0],he=Z[1],De=function(){var s=g()(E()().mark(function n(){var t,m,_,O,l,M;return E()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,r.request)("./config.json");case 2:if(t=i.sent,m=t.api.layout,m){i.next=7;break}return U("\u8BF7\u8BBE\u7F6E\u5E03\u5C40\u63A5\u53E3\uFF01"),i.abrupt("return");case 7:return h(!0),i.next=10,(0,j.U)({url:m});case 10:_=i.sent,re(_),_.menu&&(O=(0,P.hA)(_.menu,D.pathname,decodeURIComponent(v)),l=(0,P.Kg)(_.menu,O),f.push.apply(f,G()(l)),B(f),W([O])),M=(0,P.Ah)(_.menu,D.pathname,decodeURIComponent(v)),b(M),h(!1);case 16:case"end":return i.stop()}},n)}));return function(){return s.apply(this,arguments)}}(),fe=function(){var s=g()(E()().mark(function n(){var t,m,_;return E()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=(0,P.Ah)(o.menu,D.pathname,decodeURIComponent(v)),b(t),v){l.next=5;break}return U(null),l.abrupt("return");case 5:return m={},Object.keys(c).forEach(function(M){M!=="api"&&(m[M]=c[M])}),h(!0),l.next=10,(0,j.U)({url:v,data:m});case 10:_=l.sent,U(_),h(!1);case 13:case"end":return l.stop()}},n)}));return function(){return s.apply(this,arguments)}}(),v="";c!=null&&c.api&&(v=c.api),(0,d.useEffect)(function(){De()},[]),(0,d.useEffect)(function(){fe()},[c.api]);var Oe=function(n){W([n.key]);var t=(0,P.r7)(o.menu,n.key);if(t.is_link===1)return window.open(t.path,"_blank"),!1;r.history.push(t.path)},ge=function(n){B(n)},Ce=function(n){switch(n.key){case"logout":je();break;case"setting":r.history.push({pathname:"/layout/index",search:"api=/api/admin/account/setting/form"});break}},je=function(){var s=g()(E()().mark(function n(){var t;return E()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,j.U)({url:"/api/admin/logout/index/handle"});case 2:t=_.sent,t.status==="success"&&localStorage.removeItem("token"),r.history.push("/");case 5:case"end":return _.stop()}},n)}));return function(){return s.apply(this,arguments)}}(),Ue=[{key:"setting",icon:(0,a.jsx)(ee.Z,{}),label:"\u4E2A\u4EBA\u8BBE\u7F6E"},{key:"logout",icon:(0,a.jsx)(ne.Z,{}),label:"\u9000\u51FA\u767B\u5F55"}];return(0,a.jsx)(F.ZP,{locale:X.Z,children:(0,a.jsxs)(J.Z,{children:[(0,a.jsxs)(r.Helmet,{children:[(0,a.jsx)("meta",{charSet:"utf-8"}),(0,a.jsx)("title",{children:ce})]}),(o==null?void 0:o.title)&&(0,a.jsx)(Y.f,L()(L()({},o),{},{loading:oe,logo:o.logo?o.logo:w,iconfontUrl:o.iconfontUrl,openKeys:f,selectedKeys:ve,menuProps:{onOpenChange:ge,onClick:Oe},onCollapse:function(n){he(n)},menuDataRender:function(){return o.menu},actionsRender:function(){return[(0,a.jsx)(C.Z,{body:o.actions},"action")]},avatarProps:{src:u!=null&&u.avatar?u==null?void 0:u.avatar:(0,a.jsx)(_e.Z,{}),size:"small",title:te.layout==="side"?Pe||u==null?void 0:u.nickname:u==null?void 0:u.nickname,render:function(n,t){return(0,a.jsx)(Q.Z,{menu:{items:Ue,onClick:Ce},children:t})}},footerRender:function(){return(0,a.jsx)(C.Z,{body:o.footer})},children:I?(0,a.jsx)(C.Z,{body:I}):(0,a.jsx)(r.Outlet,{})}))]})})};R.default=ae}}]);
