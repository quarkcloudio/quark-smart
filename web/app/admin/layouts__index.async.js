"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[717],{52756:function(Re,L,e){e.r(L);var x=e(97857),K=e.n(x),z=e(15009),v=e.n(z),$=e(19632),G=e.n($),H=e(99289),C=e.n(H),N=e(5574),c=e.n(N),d=e(67294),r=e(80854),F=e(94740),J=e(3321),Q=e(85418),V=e(33852),Le=e.n(V),X=e(82925),Y=e(53032),q=e(94785),g=e(46401),w=e(66949),f=e(43083),y=e(91373),ee=e(43425),ne=e(92443),_e=e(87547),a=e(85893),ae=function(te){var se=(0,r.useModel)("pageLoading"),ue=se.pageLoading,oe=(0,d.useState)({}),A=c()(oe,2),u=A[0],re=A[1],le=(0,d.useState)({}),U=c()(le,2),I=U[0],j=U[1],ie=(0,r.useModel)("pageLoading"),O=ie.setPageLoading,de=(0,r.useModel)("@@initialState"),R=de.initialState,o=R==null?void 0:R.accountInfo,P=(0,r.useLocation)(),E=q.Z.parse(P.search),me=(0,d.useState)(""),T=c()(me,2),Ee=T[0],b=T[1],ve=(0,d.useState)([]),B=c()(ve,2),h=B[0],S=B[1],ce=(0,d.useState)([""]),W=c()(ce,2),pe=W[0],k=W[1],Me=(0,d.useState)(!1),Z=c()(Me,2),fe=Z[0],Oe=Z[1],Pe=function(){var s=C()(v()().mark(function n(){var t,m,_,D,l,M;return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,r.request)("./config.json");case 2:if(t=i.sent,m=t.api.layout,m){i.next=7;break}return j("\u8BF7\u8BBE\u7F6E\u5E03\u5C40\u63A5\u53E3\uFF01"),i.abrupt("return");case 7:return O(!0),i.next=10,(0,y.U)({url:m});case 10:_=i.sent,re(_),_.menu&&(D=(0,f.hA)(_.menu,P.pathname,decodeURIComponent(p)),l=(0,f.Kg)(_.menu,D),h.push.apply(h,G()(l)),S(h),k([D])),M=(0,f.Ah)(_.menu,P.pathname,decodeURIComponent(p)),b(M),O(!1);case 16:case"end":return i.stop()}},n)}));return function(){return s.apply(this,arguments)}}(),he=function(){var s=C()(v()().mark(function n(){var t,m,_;return v()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=(0,f.Ah)(u.menu,P.pathname,decodeURIComponent(p)),b(t),p){l.next=5;break}return j(null),l.abrupt("return");case 5:return m={},Object.keys(E).forEach(function(M){M!=="api"&&(m[M]=E[M])}),O(!0),l.next=10,(0,y.U)({url:p,data:m});case 10:_=l.sent,j(_),O(!1);case 13:case"end":return l.stop()}},n)}));return function(){return s.apply(this,arguments)}}(),p="";E!=null&&E.api&&(p=E.api),(0,d.useEffect)(function(){Pe()},[]),(0,d.useEffect)(function(){he()},[E.api]);var De=function(n){k([n.key]);var t=(0,f.r7)(u.menu,n.key);if(t.is_link===1)return window.open(t.path,"_blank"),!1;r.history.push(t.path)},Ce=function(n){S(n)},ge=function(n){switch(n.key){case"logout":ye();break;case"setting":r.history.push({pathname:"/layout/index",search:"api=/api/admin/account/setting/form"});break}},ye=function(){var s=C()(v()().mark(function n(){var t;return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,y.U)({url:"/api/admin/logout/index/handle"});case 2:t=_.sent,t.status==="success"&&localStorage.removeItem("token"),r.history.push("/");case 5:case"end":return _.stop()}},n)}));return function(){return s.apply(this,arguments)}}(),je=[{key:"setting",icon:(0,a.jsx)(ee.Z,{}),label:"\u4E2A\u4EBA\u8BBE\u7F6E"},{key:"logout",icon:(0,a.jsx)(ne.Z,{}),label:"\u9000\u51FA\u767B\u5F55"}];return(0,a.jsx)(F.ZP,{locale:X.Z,children:(0,a.jsxs)(J.Z,{children:[(0,a.jsxs)(r.Helmet,{children:[(0,a.jsx)("meta",{charSet:"utf-8"}),(0,a.jsx)("title",{children:Ee})]}),(u==null?void 0:u.title)&&(0,a.jsx)(Y.f,K()(K()({},u),{},{loading:ue,logo:u.logo?u.logo:w,iconfontUrl:u.iconfontUrl,openKeys:h,selectedKeys:pe,menuProps:{onOpenChange:Ce,onClick:De},onCollapse:function(n){Oe(n)},menuDataRender:function(){return u.menu},actionsRender:function(){return[(0,a.jsx)(g.Z,{body:u.actions},"action")]},avatarProps:{src:o!=null&&o.avatar?o==null?void 0:o.avatar:(0,a.jsx)(_e.Z,{}),size:"small",title:te.layout==="side"?fe||o==null?void 0:o.nickname:o==null?void 0:o.nickname,render:function(n,t){return(0,a.jsx)(Q.Z,{menu:{items:je,onClick:ge},children:t})}},footerRender:function(){return(0,a.jsx)(g.Z,{body:u.footer})},children:I?(0,a.jsx)(g.Z,{body:I}):(0,a.jsx)(r.Outlet,{})}))]})})};L.default=ae}}]);
